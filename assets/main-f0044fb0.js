import{d as debounce}from"./limit-851bbedd.js";/* empty css                      */import{M as Masonry}from"./masonry-layout-f99d37ca.js";import{I as InfiniteScroll}from"./infinite-scroll-530e71ba.js";import{W as WebFont}from"./webfontloader-88599fb4.js";const{VITE_APP_EOEFansKey:EOEFansKey,VITE_APP_SiteName:siteName}={VITE_APP_SiteName:"EOE.LOL",VITE_APP_EOEFansKey:"25aac10cef164deca8c98a2b4763bdb5",BASE_URL:"/OpenFansite/",MODE:"production",DEV:!1,PROD:!0};let OpenWay=localStorage.getItem("open_bilibili"),FirstTime=localStorage.getItem("FirstTime");function AgainLayout(){video__msnry.layout(),picture__msnry.layout()}function getRadioValueByName(e){let t=document.getElementsByName(e);for(let i=0;i<t.length;i++)if(t[i].checked)return t[i].value}const tab=document.getElementById("tab");function tabActived(e){for(let t=0;t<tab.childElementCount;t++)tab.children[t].classList.remove("actived");tab.children[e].classList.add("actived")}const tabChildren=tab.querySelectorAll("a");for(let e=0;e<tabChildren.length;e++)tabChildren[e].addEventListener("click",t=>{const i=t.target.parentNode,o=Array.prototype.indexOf.call(i.parentNode.children,i);tabActived(o)});let hashPage;hashPage=["#homepage","#videopage","#picpage","#tools"];location.hash==""&&(window.location.hash="#homepage");hashPage.includes(location.hash)&&tabActived(hashPage.indexOf(location.hash));let video__pageNumber=1,video__msnry=new Masonry(".videoList",{itemSelector:".videoCard",columnWidth:".videoList__col-sizer",gutter:".videoList__gutter-sizer",percentPosition:!0,stagger:30,transitionDuration:0,visibleStyle:{transform:"translateY(0)",opacity:1},hiddenStyle:{transform:"translateY(100px)",opacity:0}}),video__infScroll=new InfiniteScroll(".videoList",{path:function(){return`https://api.eoe.best/eoefans-api/v1/video-interface/advanced-search?order=${getRadioValueByName("video__order")}&page=${video__pageNumber}&copyright=${getRadioValueByName("video__copyright")}&subscription-key=${EOEFansKey}`},responseBody:"json",outlayer:video__msnry,status:"#videoStatus",history:!1,scrollThreshold:!1,button:"#videoList_viewmore"});video__infScroll.on("request",function(){video__pageNumber++;for(let e=0;e<document.querySelectorAll(".mask").length;e++)document.querySelectorAll(".mask")[e].classList.remove("hide");for(let e=0;e<document.querySelectorAll("#videoList_viewmore").length;e++)document.querySelectorAll("#videoList_viewmore")[e].classList.add("hide")});video__msnry.on("layoutComplete",function(){for(let e=0;e<document.querySelectorAll(".mask").length;e++)document.querySelectorAll(".mask")[e].classList.add("hide");for(let e=0;e<document.querySelectorAll("#videoList_viewmore").length;e++)document.querySelectorAll("#videoList_viewmore")[e].classList.remove("hide")});var video__proxyElem=document.createElement("div");video__infScroll.on("load",function(e){var t=e.data.result.map(getVideoItemHTML).join("");video__proxyElem.innerHTML=t;let i=video__proxyElem.querySelectorAll(".videoCard");video__infScroll.appendItems(i),video__msnry.appended(i);for(let o=0;o<document.querySelectorAll(".mask").length;o++)document.querySelectorAll(".mask")[o].classList.add("hide");setTimeout(()=>{debounce(AgainLayout,500,!1)},700)});video__infScroll.loadNextPage();for(let e=0;e<document.querySelectorAll("#videoOption label").length;e++)document.querySelectorAll("#videoOption label")[e].addEventListener("click",()=>{video__pageNumber=1,document.querySelector(".videoList").innerHTML=`                <div class="videoList__col-sizer"></div>
                <div class="videoList__gutter-sizer"></div>`,setTimeout(()=>{video__infScroll.loadNextPage(),setTimeout(()=>{AgainLayout()},700)},1)});function getVideoItemHTML({title:e,name:t,pic:i,aid:o}){return`<a class="videoCard" href="https://bilibili.com/video/av${o}" onclick="video('${o}');return false;">
    <img src = "${i}@1e_1c.webp" alt="${t}的视频封面" loading="lazy" onload="AgainLayout()" />
    <div>
        <div>${e}</div>
        <div>[UP]${t}</div>
    </div>
</a>`}let picture__msnry=new Masonry(".pictureList",{itemSelector:".pictureCard",columnWidth:".pictureList__col-sizer",gutter:".pictureList__gutter-sizer",percentPosition:!0,transitionDuration:0,stagger:30,visibleStyle:{transform:"translateY(0)",opacity:1},hiddenStyle:{transform:"translateY(100px)",opacity:0}}),picture__infScroll=new InfiniteScroll(".pictureList",{path:function(){return`https://api.eoe.lol/apiDynamic/${this.pageIndex}`},responseBody:"json",outlayer:picture__msnry,status:"#pictureStatus",history:!1,scrollThreshold:!1,button:"#pictureList_viewmore"});var picture__proxyElem=document.createElement("div");const loadWatcher=()=>{[...document.querySelectorAll(".pictureCard img")].map(e=>e.addEventListener("load",t=>{AgainLayout()},{once:!0}))};picture__infScroll.on("load",function(e){var t=e.data.map(o=>getPictureItemHTML({...o,AgainLayout})).join("");picture__proxyElem.innerHTML=t;let i=picture__proxyElem.querySelectorAll(".pictureCard");picture__infScroll.appendItems(i),picture__msnry.appended(i),loadWatcher(),setTimeout(()=>{debounce(AgainLayout,500,!1)},700)});picture__infScroll.loadNextPage();function getPictureItemHTML({username,firstPicture,dynamicIDStr}){return`<a class="pictureCard" href="https://t.bilibili.com/${dynamicIDStr}" onclick="dynamic('${dynamicIDStr}');return false;">
    <img src = "${firstPicture}@1e_1c.webp" alt="${eval("'"+username+"'")}的图片" loading="lazy" />
    <div>
        <div></div>
        <div>[UP]${eval("'"+username+"'")}</div>
    </div>
</a>`}picture__infScroll.on("request",function(){for(let e=0;e<document.querySelectorAll("#pictureList_viewmore").length;e++)document.querySelectorAll("#pictureList_viewmore")[e].classList.add("hide")});picture__msnry.on("layoutComplete",function(){for(let e=0;e<document.querySelectorAll(".mask").length;e++)document.querySelectorAll(".mask")[e].classList.add("hide");for(let e=0;e<document.querySelectorAll("#pictureList_viewmore").length;e++)document.querySelectorAll("#pictureList_viewmore")[e].classList.remove("hide")});window.addEventListener("resize",debounce(AgainLayout,500,!1));function setOpenWayRadio(e){let t=document.querySelectorAll("#OpenWayOption label input");for(let i=0;i<t.length;i++)t[i].getAttribute("value")==e&&(t[i].checked=!0)}document.getElementById("settings").addEventListener("click",()=>{document.getElementById("settings_dialog").showModal()});document.getElementById("settings_dialog").addEventListener("close",e=>{getRadioValueByName("open_bilibili")==null?localStorage.setItem("open_bilibili","website"):localStorage.setItem("open_bilibili",getRadioValueByName("open_bilibili")),OpenWay=localStorage.getItem("open_bilibili")});OpenWay==null?(localStorage.setItem("open_bilibili","website"),setOpenWayRadio("website")):setOpenWayRadio(OpenWay);document.querySelector("#homepage .right").addEventListener("click",()=>{window.location.hash="#picpage",tabActived(hashPage.indexOf(location.hash))});document.querySelector("#headerTitle").innerHTML=siteName;document.querySelector(".websiteNameForMobile").innerHTML=siteName;document.title=siteName;WebFont.load({custom:{families:["LXGWFasmartGothic"]},classes:!1,active(){document.body.style.fontFamily="LXGWFasmartGothic"}});let FirstTimeEle=document.querySelector(".FirstTime");FirstTime==null&&FirstTimeEle.classList.add("show");FirstTimeEle.addEventListener("click",()=>{localStorage.setItem("FirstTime","done"),FirstTimeEle.classList.remove("show")});
